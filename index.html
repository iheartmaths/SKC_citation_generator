<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKC Citation Generator</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%230F377F' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z'%3E%3C/path%3E%3Cpath d='M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z'%3E%3C/path%3E%3C/svg%3E">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* School Color Palette */
        :root {
            --royal-blue: #0F377F;
            --green: #2B7A39;
            --gold: #E7BE3A;
            --navy-blue: #00002D;
            --soft-grey: #EDEFF2;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }

        .main-title {
            color: var(--navy-blue);
        }

        .form-input {
            @apply w-full px-4 py-2 mt-1 text-gray-800 border-2 rounded-md focus:outline-none transition-shadow;
            background-color: var(--soft-grey);
            border-color: #d1d5db;
        }

        .form-input:focus {
            --tw-ring-color: var(--gold);
            border-color: var(--gold);
        }

        .form-label {
            @apply text-sm font-medium text-gray-600;
        }

        .btn {
             padding: 12px 24px;
             color: white;
             @apply font-semibold transition-all transform rounded-xl shadow-md hover:scale-105 border-2;
        }
        
        .btn-primary {
            background-color: var(--royal-blue);
            border-color: var(--royal-blue);
        }
        .btn-primary:hover {
            background-color: #0c2c66;
        }

        .btn-secondary {
            background-color: var(--green);
            border-color: var(--green);
        }
        .btn-secondary:hover {
            background-color: #22612d;
        }
        
        .output-bg {
             background-color: var(--soft-grey);
        }

        .copy-success-message {
            color: var(--green);
        }

        #citationOutput {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-2xl shadow-lg p-8">
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold main-title">SKC Citation Generator</h1>
                <p class="text-gray-500 mt-2">Create accurate citations for your research papers and assignments using APA7</p>
            </header>

            <main>
                <!-- Citation Type Selector -->
                <div class="mb-6">
                    <label for="citationType" class="form-label">Select Resource Type:</label>
                    <select id="citationType" class="form-input mt-1">
                        <option value="website">Website</option>
                        <option value="journalArticle">Journal Article</option>
                        <option value="book">Book (Printed)</option>
                        <option value="ebook">eBook</option>
                        <option value="onlineNewspaper">Online Newspaper Article</option>
                        <option value="onlineMagazine">Online Magazine Article</option>
                        <option value="onlineEncyclopedia">Online Encyclopedia</option>
                        <option value="wikipedia">Wikipedia</option>
                        <option value="youtube">YouTube Video</option>
                        <option value="tedTalk">TED Talk</option>
                        <option value="podcast">Podcast Episode</option>
                        <option value="film">Film</option>
                        <option value="onlineImage">Online Image</option>
                        <option value="googleMaps">Google Maps</option>
                        <option value="generativeAI">Generative AI</option>
                    </select>
                </div>

                <!-- Dynamic Input Fields -->
                <div id="fieldsContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 mb-6">
                    <!-- Fields will be dynamically inserted here -->
                </div>

                <!-- Action Buttons -->
                <div class="text-center mb-8 flex flex-col sm:flex-row sm:justify-center items-center">
                    <button id="generateBtn" class="btn btn-primary w-full sm:w-auto">Generate Citation</button>
                    <button id="todayBtn" class="btn btn-secondary w-full sm:w-auto mt-2 sm:mt-0 sm:ml-4 hidden">Retrieved Today</button>
                </div>

                <!-- Output Section -->
                <div id="outputContainer" class="hidden">
                    <h2 class="text-xl font-semibold text-gray-700 mb-3">Your Citation:</h2>
                    <div class="relative p-4 output-bg rounded-md border border-gray-200">
                        <p id="citationOutput" class="text-gray-800"></p>
                        <button id="copyBtn" class="absolute top-2 right-2 btn btn-secondary text-sm py-1 px-3">Copy</button>
                    </div>
                    <div id="copy-message" class="text-center font-medium mt-2 h-5 copy-success-message"></div>
                </div>
            </main>
        </div>
        <footer class="text-center mt-6 text-gray-400 text-sm">
            <p>&copy; 2025 Citation Generator. Built for educational purposes.</p>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const citationTypeSelect = document.getElementById('citationType');
        const fieldsContainer = document.getElementById('fieldsContainer');
        const generateBtn = document.getElementById('generateBtn');
        const todayBtn = document.getElementById('todayBtn');
        const outputContainer = document.getElementById('outputContainer');
        const citationOutput = document.getElementById('citationOutput');
        const copyBtn = document.getElementById('copyBtn');
        const copyMessage = document.getElementById('copy-message');

        // --- DATA CONFIGURATION (APA 7th Edition) ---
        const citationTypes = {
            website: {
                fields: [
                    { name: 'author', label: 'Author/Group Name', placeholder: 'e.g., Ecological Society of Australia' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2020' },
                    { name: 'title', label: 'Page Title', placeholder: 'e.g., Ecosystem recovery fund...' },
                    { name: 'siteName', label: 'Site Name', placeholder: 'e.g., Ecological Society of Australia' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i>. ${v.siteName}. ${v.url}`
            },
            journalArticle: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Rankine, A., & Callow, J.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2017' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., "Itâ€™s all lighted up..."' },
                    { name: 'journal', label: 'Journal Name', placeholder: 'e.g., Scan' },
                    { name: 'volume', label: 'Volume', placeholder: 'e.g., 36' },
                    { name: 'issue', label: 'Issue', placeholder: 'e.g., 4' },
                    { name: 'pages', label: 'Pages', placeholder: 'e.g., 46-54' },
                    { name: 'url', label: 'URL/DOI', placeholder: 'https://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). ${v.title}. <i>${v.journal}</i>, <i>${v.volume}</i>(${v.issue}), ${v.pages}. ${v.url}`
            },
            book: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Benesch, S.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2001' },
                    { name: 'title', label: 'Book Title', placeholder: 'e.g., Critical English for academic purposes...' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., Lawrence Erlbaum' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i>. ${v.publisher}.`
            },
            ebook: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Bacon, F.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2007' },
                    { name: 'title', label: 'Book Title', placeholder: 'e.g., The essays of Francis Bacon' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., Project Gutenberg' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i>. ${v.publisher}. ${v.url}`
            },
            onlineNewspaper: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Schwartz, J.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2019' },
                    { name: 'month', label: 'Month of Publication', placeholder: 'e.g., September' },
                    { name: 'day', label: 'Day of Publication', placeholder: 'e.g., 30' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., Obesity affects economic...' },
                    { name: 'newspaper', label: 'Newspaper Name', placeholder: 'e.g., The New York Times' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.author}. (${v.year}, ${v.month} ${v.day}). ${v.title}. <i>${v.newspaper}</i>. ${v.url}`
            },
            onlineMagazine: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Proudlove, C.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2018' },
                    { name: 'month', label: 'Month of Publication', placeholder: 'e.g., November' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., Daring to divert...' },
                    { name: 'magazine', label: 'Magazine Name', placeholder: 'e.g., Inside Waste' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.author}. (${v.year}, ${v.month}). ${v.title}. <i>${v.magazine}</i>. ${v.url}`
            },
             onlineEncyclopedia: {
                fields: [
                    { name: 'author', label: 'Author/Group', placeholder: 'e.g., American Psychological Association' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2015' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., Attachment' },
                    { name: 'editor', label: 'Editor (if available)', placeholder: 'e.g., Vandenbos, G. R.' },
                    { name: 'encyclopedia', label: 'Encyclopedia Name', placeholder: 'e.g., APA dictionary of psychology' },
                    { name: 'url', label: 'URL/DOI', placeholder: 'https://...' },
                ],
                template: (v) => v.editor 
                    ? `${v.author}. (${v.year}). ${v.title}. In ${v.editor} (Ed.), <i>${v.encyclopedia}</i>. ${v.url}`
                    : `${v.author}. (${v.year}). ${v.title}. In <i>${v.encyclopedia}</i>. ${v.url}`
            },
            wikipedia: {
                fields: [
                    { name: 'title', label: 'Entry Title', placeholder: 'e.g., Yellow fever' },
                    { name: 'year', label: 'Year', placeholder: 'e.g., 2020' },
                    { name: 'month', label: 'Month', placeholder: 'e.g., January' },
                    { name: 'day', label: 'Day', placeholder: 'e.g., 17' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.title}. (${v.year}, ${v.month} ${v.day}). In <i>Wikipedia</i>. ${v.url}`
            },
            youtube: {
                fields: [
                    { name: 'uploader', label: 'Uploader Name', placeholder: 'e.g., La Trobe University Library' },
                    { name: 'username', label: 'Username', placeholder: 'e.g., Library La Trobe University' },
                    { name: 'year', label: 'Year Uploaded', placeholder: 'e.g., 2010' },
                    { name: 'month', label: 'Month Uploaded', placeholder: 'e.g., February' },
                    { name: 'day', label: 'Day Uploaded', placeholder: 'e.g., 9' },
                    { name: 'title', label: 'Video Title', placeholder: 'e.g., Why canâ€™t I just Google?' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.uploader} [${v.username}]. (${v.year}, ${v.month} ${v.day}). <i>${v.title}</i> [Video]. YouTube. ${v.url}`
            },
            tedTalk: {
                fields: [
                    { name: 'speaker', label: 'Speaker Name', placeholder: 'e.g., Aral, S.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2018' },
                    { name: 'month', label: 'Month Published', placeholder: 'e.g., November' },
                    { name: 'title', label: 'Talk Title', placeholder: 'e.g., How we can protect truth...' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.speaker}. (${v.year}, ${v.month}). <i>${v.title}</i> [Video]. TED. ${v.url}`
            },
            podcast: {
                 fields: [
                    { name: 'host', label: 'Host/Presenter', placeholder: 'e.g., Malcolm, L.' },
                    { name: 'year', label: 'Year', placeholder: 'e.g., 2018' },
                    { name: 'month', label: 'Month of Broadcast', placeholder: 'e.g., October' },
                    { name: 'day', label: 'Day of Broadcast', placeholder: 'e.g., 14' },
                    { name: 'episodeTitle', label: 'Episode Title', placeholder: 'e.g., Ways to stay alive' },
                    { name: 'podcastTitle', label: 'Podcast Name', placeholder: 'e.g., All in the mind' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., ABC' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.host}. (Presenter). (${v.year}, ${v.month} ${v.day}). ${v.episodeTitle} [Audio podcast episode]. In <i>${v.podcastTitle}</i>. ${v.publisher}. ${v.url}`
            },
            film: {
                fields: [
                    { name: 'director', label: 'Director(s)', placeholder: 'e.g., Spielberg, S.' },
                    { name: 'year', label: 'Year of Release', placeholder: 'e.g., 1975' },
                    { name: 'title', label: 'Film Title', placeholder: 'e.g., Jaws' },
                    { name: 'studio', label: 'Production Studio', placeholder: 'e.g., Universal Pictures' },
                ],
                template: (v) => `${v.director}. (Director). (${v.year}). <i>${v.title}</i> [Film]. ${v.studio}.`
            },
            onlineImage: {
                fields: [
                    { name: 'author', label: 'Artist/Creator', placeholder: 'e.g., Anders, B.' },
                    { name: 'year', label: 'Year Created', placeholder: 'e.g., 1968' },
                    { name: 'title', label: 'Image Title', placeholder: 'e.g., Earthrise' },
                    { name: 'medium', label: 'Description', placeholder: 'e.g., Photograph' },
                    { name: 'gallery', label: 'Website/Publisher', placeholder: 'e.g., Time: 100 Photos' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i> [${v.medium}]. ${v.gallery}. ${v.url}`
            },
            googleMaps: {
                fields: [
                    { name: 'title', label: 'Location/Description', placeholder: 'e.g., Google maps directions...' },
                    { name: 'viewedDay', label: 'Retrieved Day', placeholder: 'e.g., 5' },
                    { name: 'viewedMonth', label: 'Retrieved Month', placeholder: 'e.g., February' },
                    { name: 'viewedYear', label: 'Retrieved Year', placeholder: 'e.g., 2020' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `Google. (n.d.). [${v.title}]. Retrieved ${v.viewedMonth} ${v.viewedDay}, ${v.viewedYear}, from ${v.url}`
            },
             generativeAI: {
                fields: [
                    { name: 'author', label: 'Author/Company', placeholder: 'e.g., OpenAI' },
                    { name: 'year', label: 'Year', placeholder: 'e.g., 2023' },
                    { name: 'generator', label: 'AI Generator Name', placeholder: 'e.g., ChatGPT' },
                    { name: 'version', label: 'Version', placeholder: 'e.g., Mar 23' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.generator}</i> (${v.version} version) [Large language model]. ${v.url}`
            },
        };

        // --- CORE FUNCTIONS ---

        function renderFields() {
            const type = citationTypeSelect.value;
            const config = citationTypes[type];
            fieldsContainer.innerHTML = ''; 

            const needsAccessDate = config.fields.some(f => f.name.startsWith('viewed'));
            todayBtn.classList.toggle('hidden', !needsAccessDate);

            config.fields.forEach(field => {
                const fieldWrapper = document.createElement('div');
                if (['title', 'url', 'newspaper', 'encyclopedia', 'magazine', 'gallery', 'studio', 'podcastTitle', 'episodeTitle', 'journal', 'siteName'].includes(field.name)) {
                     fieldWrapper.className = 'sm:col-span-2';
                }

                const label = document.createElement('label');
                label.htmlFor = field.name;
                label.className = 'form-label';
                label.textContent = field.label + ':';

                const input = document.createElement('input');
                input.type = 'text';
                input.id = field.name;
                input.name = field.name;
                input.className = 'form-input';
                input.placeholder = field.placeholder || '';

                fieldWrapper.appendChild(label);
                fieldWrapper.appendChild(input);
                fieldsContainer.appendChild(fieldWrapper);
            });
        }

        function generateCitation() {
            const type = citationTypeSelect.value;
            const config = citationTypes[type];
            const values = {};

            config.fields.forEach(field => {
                const inputElement = document.getElementById(field.name);
                values[field.name] = inputElement ? inputElement.value.trim() : '';
            });

            let citation = config.template(values);
           
            // Clean up any empty parts or extra punctuation
            citation = citation.replace(/\(\)\.|\(\s*\)\./g, '') // remove empty parenthesis
                               .replace(/, ,/g, ',')
                               .replace(/\. \./g, '.')
                               .replace(/  +/g, ' ')
                               .trim();
            
            citationOutput.innerHTML = citation; // Use innerHTML to render italics
            outputContainer.classList.remove('hidden');
        }

        function fillTodaysDate() {
            const date = new Date();
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            const day = date.getDate();
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();

            ['viewedDay', 'accessedDay'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = day;
            });
            ['viewedMonth', 'accessedMonth'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = month;
            });
            ['viewedYear', 'accessedYear'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = year;
            });
        }

        function copyToClipboard() {
            const textToCopy = citationOutput.innerText; // Use innerText to copy without HTML tags
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                copyMessage.textContent = 'Copied to clipboard!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                copyMessage.textContent = 'Failed to copy!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            }
            
            document.body.removeChild(tempTextArea);
        }

        // --- Event Listeners ---
        citationTypeSelect.addEventListener('change', renderFields);
        generateBtn.addEventListener('click', generateCitation);
        todayBtn.addEventListener('click', fillTodaysDate);
        copyBtn.addEventListener('click', copyToClipboard);

        // --- Initialisation ---
        renderFields();
    </script>

</body>
</html>


