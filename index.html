<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APA 7 Citation Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* School Color Palette */
        :root {
            --royal-blue: #0F377F;
            --green: #2B7A39;
            --gold: #E7BE3A;
            --navy-blue: #00002D;
            --soft-grey: #EDEFF2;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }

        .main-title {
            color: var(--navy-blue);
        }

        .form-input {
            @apply w-full px-4 py-2 mt-1 text-gray-800 border-2 rounded-md focus:outline-none transition-shadow;
            background-color: var(--soft-grey);
            border-color: #d1d5db;
        }

        .form-input:focus {
            --tw-ring-color: var(--gold);
            border-color: var(--gold);
        }

        .form-label {
            @apply text-sm font-medium text-gray-600;
        }

        .btn {
             padding: 12px 24px;
             color: white;
             @apply font-semibold transition-all transform rounded-xl shadow-md hover:scale-105 border-2;
        }
        
        .btn-primary {
            background-color: var(--royal-blue);
            border-color: var(--royal-blue);
        }
        .btn-primary:hover {
            background-color: #0c2c66;
        }

        .btn-secondary {
            background-color: var(--green);
            border-color: var(--green);
        }
        .btn-secondary:hover {
            background-color: #22612d;
        }
        
        .output-bg {
             background-color: var(--soft-grey);
        }

        .copy-success-message {
            color: var(--green);
        }

        #citationOutput {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-2xl shadow-lg p-8">
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold main-title">APA 7 Citation Generator</h1>
                <p class="text-gray-500 mt-2">Create accurate citations for your research papers and assignments.</p>
            </header>

            <main>
                <!-- Citation Type Selector -->
                <div class="mb-6">
                    <label for="citationType" class="form-label">Select Resource Type:</label>
                    <select id="citationType" class="form-input mt-1">
                        <option value="website">Website</option>
                        <option value="onlineEncyclopedia">Online Encyclopedia</option>
                        <option value="youtube">YouTube Video</option>
                        <option value="onlineNewspaper">Online Newspaper Article</option>
                        <option value="onlineMagazine">Online Magazine Article</option>
                        <option value="onlineImage">Online Image</option>
                        <option value="googleMaps">Google Maps</option>
                        <option value="podcast">Podcast (Audio)</option>
                        <option value="book">Book (Hard Copy)</option>
                        <option value="film">Film</option>
                    </select>
                </div>

                <!-- Dynamic Input Fields -->
                <div id="fieldsContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 mb-6">
                    <!-- Fields will be dynamically inserted here -->
                </div>

                <!-- Action Buttons -->
                <div class="text-center mb-8 flex flex-col sm:flex-row sm:justify-center items-center">
                    <button id="generateBtn" class="btn btn-primary w-full sm:w-auto">Generate Citation</button>
                    <button id="todayBtn" class="btn btn-secondary w-full sm:w-auto mt-2 sm:mt-0 sm:ml-4 hidden">Retrieved Today</button>
                </div>

                <!-- Output Section -->
                <div id="outputContainer" class="hidden">
                    <h2 class="text-xl font-semibold text-gray-700 mb-3">Your Citation:</h2>
                    <div class="relative p-4 output-bg rounded-md border border-gray-200">
                        <p id="citationOutput" class="text-gray-800"></p>
                        <button id="copyBtn" class="absolute top-2 right-2 btn btn-secondary text-sm py-1 px-3">Copy</button>
                    </div>
                    <div id="copy-message" class="text-center font-medium mt-2 h-5 copy-success-message"></div>
                </div>
            </main>
        </div>
        <footer class="text-center mt-6 text-gray-400 text-sm">
            <p>&copy; 2025 Citation Generator. Built for educational purposes.</p>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const citationTypeSelect = document.getElementById('citationType');
        const fieldsContainer = document.getElementById('fieldsContainer');
        const generateBtn = document.getElementById('generateBtn');
        const todayBtn = document.getElementById('todayBtn');
        const outputContainer = document.getElementById('outputContainer');
        const citationOutput = document.getElementById('citationOutput');
        const copyBtn = document.getElementById('copyBtn');
        const copyMessage = document.getElementById('copy-message');

        // --- DATA CONFIGURATION (APA 7th Edition) ---
        const citationTypes = {
            website: {
                fields: [
                    { name: 'author', label: 'Author/Organisation', placeholder: 'e.g., World Health Organization' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                    { name: 'title', label: 'Page Title', placeholder: 'e.g., Coronavirus disease (COVID-19)' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i>. ${v.url}`
            },
            onlineEncyclopedia: {
                fields: [
                    { name: 'author', label: 'Author (if available)', placeholder: 'e.g., Oberg, J.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., Space exploration' },
                    { name: 'encyclopedia', label: 'Encyclopedia Name', placeholder: 'e.g., World Book Student' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., World Book' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => v.author 
                    ? `${v.author}. (${v.year}). ${v.title}. In <i>${v.encyclopedia}</i>. ${v.publisher}. ${v.url}`
                    : `${v.title}. (${v.year}). In <i>${v.encyclopedia}</i>. ${v.publisher}. ${v.url}`
            },
            youtube: {
                fields: [
                    { name: 'uploader', label: 'Uploader/Channel Name', placeholder: 'e.g., National Geographic' },
                    { name: 'year', label: 'Year Uploaded', placeholder: 'e.g., 2025' },
                    { name: 'title', label: 'Video Title', placeholder: 'e.g., The Earth is Not Alone' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                ],
                template: (v) => `${v.uploader}. (${v.year}). <i>${v.title}</i> [Video]. YouTube. ${v.url}`
            },
            onlineNewspaper: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Whitbourn, M.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                    { name: 'month', label: 'Month of Publication', placeholder: 'e.g., March' },
                    { name: 'day', label: 'Day of Publication', placeholder: 'e.g., 4' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., The tweet that cost $105,000' },
                    { name: 'newspaper', label: 'Newspaper Name', placeholder: 'e.g., The Sydney Morning Herald' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.author}. (${v.year}, ${v.month} ${v.day}). ${v.title}. <i>${v.newspaper}</i>. ${v.url}`
            },
            onlineMagazine: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Lovett, P.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2024' },
                    { name: 'month', label: 'Month of Publication', placeholder: 'e.g., March' },
                    { name: 'title', label: 'Article Title', placeholder: 'e.g., Man-made earthquakes...' },
                    { name: 'magazine', label: 'Magazine Name', placeholder: 'e.g., Cosmos: The Science of Everything' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.author}. (${v.year}, ${v.month}). ${v.title}. <i>${v.magazine}</i>. ${v.url}`
            },
            onlineImage: {
                fields: [
                    { name: 'author', label: 'Artist/Creator (if known)', placeholder: 'e.g., Monet, C.' },
                    { name: 'year', label: 'Year Created', placeholder: 'e.g., 1890' },
                    { name: 'title', label: 'Image Title', placeholder: 'e.g., Haystacks, midday' },
                    { name: 'medium', label: 'Medium/Type', placeholder: 'e.g., Painting' },
                    { name: 'gallery', label: 'Gallery/Website', placeholder: 'e.g., National Gallery of Australia' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => v.author 
                    ? `${v.author}. (${v.year}). <i>${v.title}</i> [${v.medium}]. ${v.gallery}. ${v.url}`
                    : `<i>${v.title}</i>. (${v.year}). [${v.medium}]. ${v.gallery}. ${v.url}`
            },
            googleMaps: {
                fields: [
                    { name: 'title', label: 'Location/Place Name', placeholder: 'e.g., Himalayas' },
                    { name: 'year', label: 'Year', placeholder: 'e.g., 2025' },
                    { name: 'url', label: 'URL', placeholder: 'https://...' },
                    { name: 'viewedDay', label: 'Retrieved Day', placeholder: 'e.g., 21' },
                    { name: 'viewedMonth', label: 'Retrieved Month', placeholder: 'e.g., March' },
                    { name: 'viewedYear', label: 'Retrieved Year', placeholder: 'e.g., 2025' },
                ],
                template: (v) => `Google. (${v.year}). <i>${v.title}</i>. Retrieved ${v.viewedMonth} ${v.viewedDay}, ${v.viewedYear}, from ${v.url}`
            },
            podcast: {
                 fields: [
                    { name: 'host', label: 'Host(s)', placeholder: 'e.g., Glass, I.' },
                    { name: 'year', label: 'Year', placeholder: 'e.g., 2025' },
                    { name: 'month', label: 'Month of Broadcast', placeholder: 'e.g., February' },
                    { name: 'day', label: 'Day of Broadcast', placeholder: 'e.g., 28' },
                    { name: 'episodeTitle', label: 'Episode Title', placeholder: 'e.g., The Giant Pool of Money' },
                    { name: 'podcastTitle', label: 'Podcast Name', placeholder: 'e.g., This American Life' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., WBEZ Chicago' },
                    { name: 'url', label: 'URL', placeholder: 'http://...' },
                ],
                template: (v) => `${v.host}. (Host). (${v.year}, ${v.month} ${v.day}). ${v.episodeTitle} [Audio podcast episode]. In <i>${v.podcastTitle}</i>. ${v.publisher}. ${v.url}`
            },
            book: {
                fields: [
                    { name: 'author', label: 'Author(s)', placeholder: 'e.g., Holden, A.' },
                    { name: 'year', label: 'Year Published', placeholder: 'e.g., 2024' },
                    { name: 'title', label: 'Book Title', placeholder: 'e.g., Earthquakes and Volcanoes' },
                    { name: 'publisher', label: 'Publisher', placeholder: 'e.g., Widenfeld & Nicholson' },
                ],
                template: (v) => `${v.author}. (${v.year}). <i>${v.title}</i>. ${v.publisher}.`
            },
            film: {
                fields: [
                    { name: 'director', label: 'Director(s)', placeholder: 'e.g., Niccol, A.' },
                    { name: 'year', label: 'Year of Release', placeholder: 'e.g., 2021' },
                    { name: 'title', label: 'Film Title', placeholder: 'e.g., Gattaca' },
                    { name: 'studio', label: 'Production Studio', placeholder: 'e.g., Columbia Pictures' },
                ],
                template: (v) => `${v.director}. (Director). (${v.year}). <i>${v.title}</i> [Film]. ${v.studio}.`
            }
        };

        // --- CORE FUNCTIONS ---

        function renderFields() {
            const type = citationTypeSelect.value;
            const config = citationTypes[type];
            fieldsContainer.innerHTML = ''; 

            const needsAccessDate = config.fields.some(f => f.name.startsWith('viewed'));
            todayBtn.classList.toggle('hidden', !needsAccessDate);

            config.fields.forEach(field => {
                const fieldWrapper = document.createElement('div');
                if (['title', 'url', 'newspaper', 'encyclopedia', 'magazine', 'gallery', 'studio', 'podcastTitle', 'episodeTitle'].includes(field.name)) {
                     fieldWrapper.className = 'sm:col-span-2';
                }

                const label = document.createElement('label');
                label.htmlFor = field.name;
                label.className = 'form-label';
                label.textContent = field.label + ':';

                const input = document.createElement('input');
                input.type = 'text';
                input.id = field.name;
                input.name = field.name;
                input.className = 'form-input';
                input.placeholder = field.placeholder || '';

                fieldWrapper.appendChild(label);
                fieldWrapper.appendChild(input);
                fieldsContainer.appendChild(fieldWrapper);
            });
        }

        function generateCitation() {
            const type = citationTypeSelect.value;
            const config = citationTypes[type];
            const values = {};

            config.fields.forEach(field => {
                const inputElement = document.getElementById(field.name);
                values[field.name] = inputElement ? inputElement.value.trim() : '';
            });

            let citation = config.template(values);
           
            // Clean up any empty parts or extra punctuation
            citation = citation.replace(/\(\)\.|\(\s*\)\./g, '') // remove empty parenthesis
                               .replace(/, ,/g, ',')
                               .replace(/\. \./g, '.')
                               .replace(/  +/g, ' ')
                               .trim();
            
            citationOutput.innerHTML = citation; // Use innerHTML to render italics
            outputContainer.classList.remove('hidden');
        }

        function fillTodaysDate() {
            const date = new Date();
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            const day = date.getDate();
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();

            ['viewedDay', 'accessedDay'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = day;
            });
            ['viewedMonth', 'accessedMonth'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = month;
            });
            ['viewedYear', 'accessedYear'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = year;
            });
        }

        function copyToClipboard() {
            const textToCopy = citationOutput.innerText; // Use innerText to copy without HTML tags
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                copyMessage.textContent = 'Copied to clipboard!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                copyMessage.textContent = 'Failed to copy!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            }
            
            document.body.removeChild(tempTextArea);
        }

        // --- Event Listeners ---
        citationTypeSelect.addEventListener('change', renderFields);
        generateBtn.addEventListener('click', generateCitation);
        todayBtn.addEventListener('click', fillTodaysDate);
        copyBtn.addEventListener('click', copyToClipboard);

        // --- Initialisation ---
        renderFields();
    </script>

</body>
</html>


