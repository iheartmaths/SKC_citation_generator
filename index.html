<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harvard Citation Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* School Color Palette */
        :root {
            --royal-blue: #0F377F;
            --green: #2B7A39;
            --gold: #E7BE3A;
            --navy-blue: #00002D;
            --soft-grey: #EDEFF2;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb; /* A slightly off-white background */
        }

        .main-title {
            color: var(--navy-blue);
        }

        .form-input {
            @apply w-full px-4 py-2 mt-1 text-gray-800 border-2 rounded-md focus:outline-none transition-shadow;
            background-color: var(--soft-grey);
            border-color: #d1d5db; /* A neutral grey border */
        }

        .form-input:focus {
            --tw-ring-color: var(--gold);
            border-color: var(--gold);
        }

        .form-label {
            @apply text-sm font-medium text-gray-600;
        }

        .btn {
            /* Increased padding (py-3), rounded corners (rounded-xl), and ensured white text */
            color:white;
            padding:10px;
            border-radius:5px;
            margin-right:20px;
            @apply px-8 py-3 font-semibold text-white transition-all transform rounded-xl shadow-md hover:scale-105 border-2;
        }

        .btn-primary {
            background-color: var(--royal-blue);
            border-color: var(--royal-blue);
        }
        .btn-primary:hover {
            background-color: #0c2c66; /* Darker Royal Blue */
        }

        .btn-secondary {
            background-color: var(--green);
            border-color: var(--green);
        }
        .btn-secondary:hover {
            background-color: #22612d; /* Darker Green */
        }
        
        .output-bg {
             background-color: var(--soft-grey);
        }

        .copy-success-message {
            color: var(--green);
        }

        #citationOutput {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-2xl shadow-lg p-8">
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold main-title">SKC Harvard Citation Generator</h1>
                <p class="text-gray-500 mt-2">Create accurate citations for your research papers and assignments.</p>
            </header>

            <main>
                <!-- Citation Type Selector -->
                <div class="mb-6">
                    <label for="citationType" class="form-label">Select Resource Type:</label>
                    <select id="citationType" class="form-input mt-1">
                        <option value="website">Website</option>
                        <option value="onlineEncyclopedia">Online Encyclopedia</option>
                        <option value="youtube">YouTube Video</option>
                        <option value="onlineNewspaper">Online Newspaper Article</option>
                        <option value="onlineMagazine">Online Magazine Article</option>
                        <option value="onlineImage">Online Image</option>
                        <option value="googleMaps">Google Maps</option>
                        <option value="podcast">Podcast (Audio)</option>
                        <option value="book">Book (Hard Copy)</option>
                        <option value="film">Film</option>
                    </select>
                </div>

                <!-- Dynamic Input Fields -->
                <div id="fieldsContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 mb-6">
                    <!-- Fields will be dynamically inserted here -->
                </div>

                <!-- Action Buttons -->
                <div class="text-center mb-8 flex flex-col sm:flex-row sm:justify-center items-center">
                    
                    <button id="todayBtn" class="btn btn-secondary w-full sm:w-auto mt-2 sm:mt-0 sm:ml-4 hidden">Viewed/Accessed Today</button>
                
                    <button id="generateBtn" class="btn btn-primary w-full sm:w-auto">Generate Citation</button>
                </div>

                <!-- Output Section -->
                <div id="outputContainer" class="hidden">
                    <h2 class="text-xl font-semibold text-gray-700 mb-3">Your Citation:</h2>
                    <div class="relative p-4 output-bg rounded-md border border-gray-200">
                        <p id="citationOutput" class="text-gray-800"></p>
                        <button id="copyBtn" class="absolute top-2 right-2 btn btn-secondary text-sm py-1 px-3">Copy</button>
                    </div>
                    <div id="copy-message" class="text-center font-medium mt-2 h-5 copy-success-message"></div>
                </div>
            </main>
        </div>
        <footer class="text-center mt-6 text-gray-400 text-sm">
            <p>&copy; 2025 Citation Generator. Built for educational purposes.</p>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const citationTypeSelect = document.getElementById('citationType');
        const fieldsContainer = document.getElementById('fieldsContainer');
        const generateBtn = document.getElementById('generateBtn');
        const todayBtn = document.getElementById('todayBtn');
        const outputContainer = document.getElementById('outputContainer');
        const citationOutput = document.getElementById('citationOutput');
        const copyBtn = document.getElementById('copyBtn');
        const copyMessage = document.getElementById('copy-message');

        // --- Data: Fields for each citation type based on institutional guide ---
        const citationFields = {
            website: [
                { name: 'author', label: 'Author/Organisation', placeholder: 'e.g., NASA' },
                { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                { name: 'title', label: 'Page Title', placeholder: 'e.g., Explore Moon to Mars' },
                { name: 'url', label: 'URL', placeholder: 'https://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 25' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., February' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            onlineEncyclopedia: [
                { name: 'author', label: 'Author (if available)', placeholder: 'e.g., Oberg, J' },
                { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                { name: 'title', label: 'Article Title', placeholder: 'e.g., Space exploration' },
                { name: 'encyclopedia', label: 'Encyclopedia Name', placeholder: 'e.g., World Book Student' },
                { name: 'publisher', label: 'Publisher', placeholder: 'e.g., World Book' },
                { name: 'city', label: 'City', placeholder: 'e.g., Chicago' },
                { name: 'url', label: 'URL', placeholder: 'https://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 21' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., January' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            youtube: [
                { name: 'title', label: 'Video Title', placeholder: 'e.g., The Earth is Not Alone' },
                { name: 'year', label: 'Year Uploaded', placeholder: 'e.g., 2025' },
                { name: 'url', label: 'URL', placeholder: 'https://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 22' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., February' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            onlineNewspaper: [
                { name: 'author', label: 'Author(s)', placeholder: 'e.g., Whitbourn, M' },
                { name: 'year', label: 'Year Published', placeholder: 'e.g., 2025' },
                { name: 'title', label: 'Article Title', placeholder: 'e.g., The tweet that cost $105,000' },
                { name: 'newspaper', label: 'Newspaper Name', placeholder: 'e.g., The Sydney Morning Herald' },
                { name: 'day', label: 'Day of Publication', placeholder: 'e.g., 4' },
                { name: 'month', label: 'Month of Publication', placeholder: 'e.g., March' },
                { name: 'page', label: 'Page Number', placeholder: 'e.g., 4' },
                { name: 'url', label: 'URL', placeholder: 'http://...' },
            ],
            onlineMagazine: [
                { name: 'author', label: 'Author(s)', placeholder: 'e.g., Lovett, P' },
                { name: 'year', label: 'Year Published', placeholder: 'e.g., 2024' },
                { name: 'title', label: 'Article Title', placeholder: 'e.g., Man-made earthquakes...' },
                { name: 'magazine', label: 'Magazine Name', placeholder: 'e.g., Cosmos: The Science of Everything' },
                { name: 'url', label: 'URL', placeholder: 'http://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 25' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., March' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            onlineImage: [
                { name: 'author', label: 'Artist/Creator (if known)', placeholder: 'e.g., Monet, C' },
                { name: 'year', label: 'Year Created', placeholder: 'e.g., 1890' },
                { name: 'title', label: 'Image Title', placeholder: 'e.g., Haystacks, midday' },
                { name: 'medium', label: 'Medium/Type', placeholder: 'e.g., painting' },
                { name: 'gallery', label: 'Gallery/Website', placeholder: 'e.g., National Gallery of Australia' },
                { name: 'city', label: 'City (if applicable)', placeholder: 'e.g., Canberra' },
                { name: 'url', label: 'URL', placeholder: 'http://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 18' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., February' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            googleMaps: [
                { name: 'title', label: 'Location/Place Name', placeholder: 'e.g., Himalayas' },
                { name: 'year', label: 'Year', placeholder: 'e.g., 2025' },
                { name: 'url', label: 'URL', placeholder: 'https://...' },
                { name: 'viewedDay', label: 'Viewed Day', placeholder: 'e.g., 21' },
                { name: 'viewedMonth', label: 'Viewed Month', placeholder: 'e.g., March' },
                { name: 'viewedYear', label: 'Viewed Year', placeholder: 'e.g., 2025' },
            ],
            podcast: [
                { name: 'title', label: 'Podcast/Episode Title', placeholder: 'e.g., AM: News & Current Affairs' },
                { name: 'year', label: 'Year', placeholder: 'e.g., 2025' },
                { name: 'publisher', label: 'Publisher', placeholder: 'e.g., ABC Radio' },
                { name: 'city', label: 'City', placeholder: 'e.g., Melbourne' },
                { name: 'day', label: 'Day of Broadcast', placeholder: 'e.g., 28' },
                { name: 'month', label: 'Month of Broadcast', placeholder: 'e.g., February' },
                { name: 'url', label: 'URL', placeholder: 'http://...' },
                { name: 'accessedDay', label: 'Accessed Day', placeholder: 'e.g., 28' },
                { name: 'accessedMonth', label: 'Accessed Month', placeholder: 'e.g., March' },
                { name: 'accessedYear', label: 'Accessed Year', placeholder: 'e.g., 2025' },
            ],
            book: [
                { name: 'author', label: 'Author(s)', placeholder: 'e.g., Holden, A' },
                { name: 'year', label: 'Year Published', placeholder: 'e.g., 2024' },
                { name: 'title', label: 'Book Title', placeholder: 'e.g., Earthquakes and Volcanoes' },
                { name: 'publisher', label: 'Publisher', placeholder: 'e.g., Widenfeld & Nicholson' },
                { name: 'city', label: 'City of Publication', placeholder: 'e.g., London' },
            ],
            film: [
                { name: 'title', label: 'Film Title', placeholder: 'e.g., Gattaca' },
                { name: 'year', label: 'Year of Release', placeholder: 'e.g., 2021' },
                { name: 'country', label: 'Country of Origin', placeholder: 'e.g., United States' },
                { name: 'studio', label: 'Production Studio', placeholder: 'e.g., Columbia Pictures' },
            ]
        };

        // --- Functions ---

        /**
         * Renders the input fields based on the selected citation type.
         * Also shows/hides the 'Viewed Today' button.
         */
        function renderFields() {
            const type = citationTypeSelect.value;
            const fields = citationFields[type];
            fieldsContainer.innerHTML = ''; // Clear existing fields

            const needsAccessDate = fields.some(f => f.name.startsWith('viewed') || f.name.startsWith('accessed'));
            if (needsAccessDate) {
                todayBtn.classList.remove('hidden');
            } else {
                todayBtn.classList.add('hidden');
            }

            fields.forEach(field => {
                const fieldWrapper = document.createElement('div');
                if (['title', 'url', 'newspaper', 'encyclopedia', 'magazine', 'gallery', 'studio'].includes(field.name)) {
                     fieldWrapper.className = 'sm:col-span-2';
                }

                const label = document.createElement('label');
                label.htmlFor = field.name;
                label.className = 'form-label';
                label.textContent = field.label + ':';

                const input = document.createElement('input');
                input.type = 'text';
                input.id = field.name;
                input.name = field.name;
                input.className = 'form-input';
                input.placeholder = field.placeholder || '';

                fieldWrapper.appendChild(label);
                fieldWrapper.appendChild(input);
                fieldsContainer.appendChild(fieldWrapper);
            });
        }

        /**
         * Fills the date fields with the current date.
         */
        function fillTodaysDate() {
            const date = new Date();
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            const day = date.getDate();
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();

            ['viewedDay', 'accessedDay'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = day;
            });
            ['viewedMonth', 'accessedMonth'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = month;
            });
            ['viewedYear', 'accessedYear'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = year;
            });
        }

        /**
         * Gathers input values and generates the Harvard-style citation.
         */
        function generateCitation() {
            const type = citationTypeSelect.value;
            const values = {};
            const inputs = fieldsContainer.querySelectorAll('input');
            inputs.forEach(input => {
                values[input.name] = input.value.trim();
            });

            let citation = 'Please fill in all the required fields.';

            // Generate citation string based on type
            try {
                 switch (type) {
                    case 'website':
                        citation = `${values.author}, ${values.year}, ${values.title}, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        break;
                    case 'onlineEncyclopedia':
                        if (values.author) {
                            citation = `${values.author}, ${values.year}, "${values.title}", ${values.encyclopedia}, ${values.publisher}, ${values.city}, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        } else {
                            citation = `"${values.title}", ${values.year}, ${values.encyclopedia}, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        }
                        break;
                    case 'youtube':
                        citation = `${values.title}, ${values.year}, YouTube video, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        break;
                    case 'onlineNewspaper':
                        citation = `${values.author}, ${values.year}, "${values.title}", ${values.newspaper}, ${values.day} ${values.month}, p. ${values.page}, ${values.url}`;
                        break;
                    case 'onlineMagazine':
                        citation = `${values.author}, ${values.year}, "${values.title}", ${values.magazine}, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        break;
                    case 'onlineImage':
                        let authorOrTitle = values.author ? `${values.author}, ${values.year}, ${values.title}` : `${values.title}, ${values.year}`;
                        citation = `${authorOrTitle}, ${values.medium}, ${values.gallery}, ${values.city}, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        break;
                    case 'googleMaps':
                        citation = `"${values.title}", ${values.year}, Google Maps, viewed ${values.viewedDay} ${values.viewedMonth} ${values.viewedYear}, ${values.url}`;
                        break;
                    case 'podcast':
                        citation = `${values.title}, ${values.year}, audio podcast, ${values.publisher}, ${values.city}, ${values.day} ${values.month}, accessed ${values.accessedDay} ${values.accessedMonth} ${values.accessedYear}, ${values.url}`;
                        break;
                    case 'book':
                        citation = `${values.author}, ${values.year}, ${values.title}, ${values.publisher}, ${values.city}.`;
                        break;
                    case 'film':
                        citation = `${values.title}, ${values.year}, motion picture, ${values.country}, ${values.studio}.`;
                        break;
                }
            } catch (e) {
                console.error("Error generating citation:", e);
                citation = "An error occurred. Please check your input."
            }
           
            citationOutput.textContent = citation.replace(/, ,/g, ',').replace(/, \./g, '.').replace(/  +/g, ' '); // Basic cleanup
            outputContainer.classList.remove('hidden');
        }

        /**
         * Copies the generated citation text to the clipboard.
         */
        function copyToClipboard() {
            const textToCopy = citationOutput.textContent;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                copyMessage.textContent = 'Copied to clipboard!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                copyMessage.textContent = 'Failed to copy!';
                setTimeout(() => { copyMessage.textContent = ''; }, 2000);
            }
            
            document.body.removeChild(tempTextArea);
        }

        // --- Event Listeners ---
        citationTypeSelect.addEventListener('change', renderFields);
        generateBtn.addEventListener('click', generateCitation);
        todayBtn.addEventListener('click', fillTodaysDate);
        copyBtn.addEventListener('click', copyToClipboard);

        // --- Initialisation ---
        renderFields();
    </script>

</body>
</html>
